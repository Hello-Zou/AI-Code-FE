<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ—¥æœŸé€‰æ‹©å™¨æ¼”ç¤º</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            color: white;
            padding: 30px 0;
        }

        h1 {
            font-size: 32px;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 16px;
            opacity: 0.9;
        }

        .demo-card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }

        h2 {
            font-size: 24px;
            margin-bottom: 25px;
            color: #444;
            border-left: 4px solid #667eea;
            padding-left: 15px;
        }

        /* æ—¥æœŸé€‰æ‹©å™¨æ ·å¼ */
        .date-picker {
            position: relative;
            width: 100%;
            max-width: 300px;
        }

        .date-input {
            width: 100%;
            padding: 14px 45px 14px 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 16px;
            background: white;
            cursor: pointer;
            transition: all 0.3s;
        }

        .date-input:hover {
            border-color: #667eea;
        }

        .date-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .date-icon {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #667eea;
            pointer-events: none;
        }

        .calendar-container {
            position: absolute;
            top: 100%;
            left: 0;
            width: 320px;
            background: white;
            border: 2px solid #ddd;
            border-radius: 10px;
            margin-top: 5px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s;
        }

        .calendar-container.show {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: #667eea;
            color: white;
            border-radius: 8px 8px 0 0;
        }

        .calendar-nav {
            background: none;
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
            padding: 5px 10px;
            border-radius: 5px;
            transition: background 0.3s;
        }

        .calendar-nav:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .calendar-title {
            font-weight: 600;
            font-size: 18px;
        }

        .calendar-weekdays {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            padding: 10px 0;
            background: #f8f9fa;
            border-bottom: 1px solid #eee;
        }

        .weekday {
            text-align: center;
            font-weight: 600;
            color: #666;
            font-size: 14px;
        }

        .calendar-days {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
            padding: 15px;
        }

        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s;
            border: 2px solid transparent;
        }

        .calendar-day:hover {
            background: #f0f2ff;
        }

        .calendar-day.other-month {
            color: #ccc;
        }

        .calendar-day.today {
            background: #e3f2fd;
            color: #1976d2;
            font-weight: 600;
        }

        .calendar-day.selected {
            background: #667eea;
            color: white;
            font-weight: 600;
        }

        .calendar-day.disabled {
            color: #ddd;
            cursor: not-allowed;
        }

        .calendar-day.disabled:hover {
            background: transparent;
        }

        .calendar-footer {
            padding: 15px;
            border-top: 1px solid #eee;
            display: flex;
            justify-content: space-between;
        }

        .today-btn,
        .clear-btn {
            padding: 8px 15px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }

        .today-btn {
            background: #f0f2ff;
            color: #667eea;
        }

        .today-btn:hover {
            background: #e4e7ff;
        }

        .clear-btn {
            background: #f8f9fa;
            color: #666;
        }

        .clear-btn:hover {
            background: #e9ecef;
        }

        /* æ—¥æœŸèŒƒå›´é€‰æ‹©å™¨ */
        .date-range-picker {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .date-range-separator {
            color: #666;
            font-weight: bold;
        }

        /* æ—¶é—´é€‰æ‹©å™¨ */
        .time-picker {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .time-input {
            width: 70px;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 6px;
            text-align: center;
            font-size: 16px;
        }

        .time-separator {
            font-size: 18px;
            font-weight: bold;
            color: #666;
        }

        /* å¿«é€Ÿé€‰æ‹©æŒ‰é’® */
        .quick-select {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 20px;
        }

        .quick-btn {
            padding: 8px 15px;
            background: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }

        .quick-btn:hover {
            background: #e9ecef;
            border-color: #667eea;
        }

        /* ç»“æœå±•ç¤º */
        .result-box {
            margin-top: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .result-title {
            font-weight: 600;
            margin-bottom: 10px;
            color: #333;
        }

        .result-content {
            font-family: 'Courier New', monospace;
            font-size: 14px;
            color: #666;
            word-break: break-all;
        }

        /* æ§åˆ¶æŒ‰é’® */
        .controls {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-top: 20px;
        }

        .control-btn {
            padding: 12px 25px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
        }

        .control-btn:hover {
            background: #5a67d8;
            transform: translateY(-2px);
        }

        .control-btn.secondary {
            background: #f8f9fa;
            color: #333;
        }

        .control-btn.secondary:hover {
            background: #e9ecef;
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .date-range-picker {
                flex-direction: column;
                gap: 15px;
            }

            .calendar-container {
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                width: 90%;
                max-width: 320px;
            }

            .calendar-container.show {
                transform: translate(-50%, -50%);
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <header>
            <h1>æ—¥æœŸé€‰æ‹©å™¨æ¼”ç¤º</h1>
            <p class="subtitle">ç®€å•æ˜“ç”¨çš„æ—¥æœŸé€‰æ‹©ç»„ä»¶</p>
        </header>

        <div class="demo-card">
            <h2>åŸºæœ¬æ—¥æœŸé€‰æ‹©å™¨</h2>
            <div class="date-picker" id="datePicker">
                <input type="text" class="date-input" placeholder="é€‰æ‹©æ—¥æœŸ" readonly>
                <span class="date-icon">ğŸ“…</span>
                <div class="calendar-container" id="calendar"></div>
            </div>
        </div>

        <div class="demo-card">
            <h2>æ—¥æœŸèŒƒå›´é€‰æ‹©å™¨</h2>
            <div class="date-range-picker">
                <div class="date-picker" id="startDatePicker">
                    <input type="text" class="date-input" placeholder="å¼€å§‹æ—¥æœŸ" readonly>
                    <span class="date-icon">ğŸ“…</span>
                    <div class="calendar-container" id="startCalendar"></div>
                </div>
                <span class="date-range-separator">è‡³</span>
                <div class="date-picker" id="endDatePicker">
                    <input type="text" class="date-input" placeholder="ç»“æŸæ—¥æœŸ" readonly>
                    <span class="date-icon">ğŸ“…</span>
                    <div class="calendar-container" id="endCalendar"></div>
                </div>
            </div>

            <div class="quick-select">
                <button class="quick-btn" data-range="today">ä»Šå¤©</button>
                <button class="quick-btn" data-range="yesterday">æ˜¨å¤©</button>
                <button class="quick-btn" data-range="thisWeek">æœ¬å‘¨</button>
                <button class="quick-btn" data-range="lastWeek">ä¸Šå‘¨</button>
                <button class="quick-btn" data-range="thisMonth">æœ¬æœˆ</button>
                <button class="quick-btn" data-range="lastMonth">ä¸Šæœˆ</button>
                <button class="quick-btn" data-range="thisYear">ä»Šå¹´</button>
            </div>
        </div>

        <div class="demo-card">
            <h2>æ—¥æœŸæ—¶é—´é€‰æ‹©å™¨</h2>
            <div class="date-picker" id="datetimePicker">
                <input type="text" class="date-input" placeholder="é€‰æ‹©æ—¥æœŸæ—¶é—´" readonly>
                <span class="date-icon">â°</span>
                <div class="calendar-container" id="datetimeCalendar"></div>
            </div>

            <div class="time-picker" id="timePicker" style="margin-top: 15px; display: none;">
                <input type="number" class="time-input" id="hourInput" min="0" max="23" placeholder="æ—¶">
                <span class="time-separator">:</span>
                <input type="number" class="time-input" id="minuteInput" min="0" max="59" placeholder="åˆ†">
                <select class="time-input" id="ampmSelect" style="width: 80px;">
                    <option value="AM">AM</option>
                    <option value="PM">PM</option>
                </select>
            </div>
        </div>

        <div class="result-box">
            <div class="result-title">å½“å‰é€‰æ‹©ï¼š</div>
            <div class="result-content" id="resultContent">æ— </div>
        </div>

        <div class="controls">
            <button class="control-btn" id="getDateBtn">è·å–é€‰ä¸­æ—¥æœŸ</button>
            <button class="control-btn" id="setDateBtn">è®¾ç½®ä¸ºä»Šå¤©</button>
            <button class="control-btn" id="clearDateBtn">æ¸…ç©ºæ—¥æœŸ</button>
            <button class="control-btn secondary" id="disableBtn">ç¦ç”¨/å¯ç”¨</button>
        </div>
    </div>

    <script>
        class DatePicker {
            constructor(containerId, options = {}) {
                this.container = document.getElementById(containerId);
                this.input = this.container.querySelector('.date-input');
                this.calendar = this.container.querySelector('.calendar-container');

                this.options = {
                    format: 'YYYY-MM-DD',
                    minDate: null,
                    maxDate: null,
                    showTime: false,
                    timeFormat: '24h',
                    onChange: null,
                    ...options
                };

                this.currentDate = new Date();
                this.selectedDate = null;
                this.showingDate = new Date();
                this.isOpen = false;

                this.init();
            }

            init() {
                this.renderCalendar();
                this.bindEvents();
            }

            bindEvents() {
                // è¾“å…¥æ¡†ç‚¹å‡»æ‰“å¼€æ—¥å†
                this.input.addEventListener('click', () => {
                    this.toggleCalendar();
                });

                // ç‚¹å‡»å¤–éƒ¨å…³é—­æ—¥å†
                document.addEventListener('click', (e) => {
                    if (!this.container.contains(e.target) && this.isOpen) {
                        this.closeCalendar();
                    }
                });
            }

            toggleCalendar() {
                if (this.isOpen) {
                    this.closeCalendar();
                } else {
                    this.openCalendar();
                }
            }

            openCalendar() {
                this.isOpen = true;
                this.calendar.classList.add('show');
                this.renderCalendar();
            }

            closeCalendar() {
                this.isOpen = false;
                this.calendar.classList.remove('show');
            }

            renderCalendar() {
                const year = this.showingDate.getFullYear();
                const month = this.showingDate.getMonth();

                // æ—¥å†æ ‡é¢˜
                const monthNames = [
                    'ä¸€æœˆ', 'äºŒæœˆ', 'ä¸‰æœˆ', 'å››æœˆ', 'äº”æœˆ', 'å…­æœˆ',
                    'ä¸ƒæœˆ', 'å…«æœˆ', 'ä¹æœˆ', 'åæœˆ', 'åä¸€æœˆ', 'åäºŒæœˆ'
                ];

                const calendarHTML = `
                    <div class="calendar-header">
                        <button class="calendar-nav prev-year" data-change="year" data-dir="-1">Â«</button>
                        <button class="calendar-nav prev-month" data-change="month" data-dir="-1">â€¹</button>
                        <div class="calendar-title">${year}å¹´ ${monthNames[month]}</div>
                        <button class="calendar-nav next-month" data-change="month" data-dir="1">â€º</button>
                        <button class="calendar-nav next-year" data-change="year" data-dir="1">Â»</button>
                    </div>
                    <div class="calendar-weekdays">
                        <div class="weekday">æ—¥</div>
                        <div class="weekday">ä¸€</div>
                        <div class="weekday">äºŒ</div>
                        <div class="weekday">ä¸‰</div>
                        <div class="weekday">å››</div>
                        <div class="weekday">äº”</div>
                        <div class="weekday">å…­</div>
                    </div>
                    <div class="calendar-days" id="calendarDays">
                        ${this.generateCalendarDays(year, month)}
                    </div>
                    <div class="calendar-footer">
                        <button class="today-btn">ä»Šå¤©</button>
                        <button class="clear-btn">æ¸…ç©º</button>
                    </div>
                `;

                this.calendar.innerHTML = calendarHTML;

                // ç»‘å®šæ—¥å†äº‹ä»¶
                this.bindCalendarEvents();
            }

            generateCalendarDays(year, month) {
                // è·å–å½“æœˆç¬¬ä¸€å¤©å’Œæœ€åä¸€å¤©
                const firstDay = new Date(year, month, 1);
                const lastDay = new Date(year, month + 1, 0);

                // è·å–ç¬¬ä¸€å¤©æ˜¯æ˜ŸæœŸå‡ ï¼ˆ0-6ï¼Œ0æ˜¯å‘¨æ—¥ï¼‰
                const firstDayWeekday = firstDay.getDay();

                // è·å–ä¸Šä¸ªæœˆçš„æœ€åä¸€å¤©
                const prevMonthLastDay = new Date(year, month, 0).getDate();

                // è®¡ç®—æ€»å¤©æ•°ï¼ˆåŒ…æ‹¬å‰åæœˆä»½çš„ç©ºæ ¼ï¼‰
                const totalDays = 42; // 6è¡Œ * 7å¤©

                let html = '';
                const today = new Date();

                for (let i = 0; i < totalDays; i++) {
                    let day, date, isCurrentMonth, isToday, isSelected, isDisabled;

                    if (i < firstDayWeekday) {
                        // ä¸Šä¸ªæœˆçš„æ—¥æœŸ
                        day = prevMonthLastDay - (firstDayWeekday - i - 1);
                        date = new Date(year, month - 1, day);
                        isCurrentMonth = false;
                    } else if (i >= firstDayWeekday && i < firstDayWeekday + lastDay.getDate()) {
                        // å½“å‰æœˆçš„æ—¥æœŸ
                        day = i - firstDayWeekday + 1;
                        date = new Date(year, month, day);
                        isCurrentMonth = true;
                    } else {
                        // ä¸‹ä¸ªæœˆçš„æ—¥æœŸ
                        day = i - firstDayWeekday - lastDay.getDate() + 1;
                        date = new Date(year, month + 1, day);
                        isCurrentMonth = false;
                    }

                    // æ£€æŸ¥æ˜¯å¦æ˜¯ä»Šå¤©
                    isToday = date.getDate() === today.getDate() &&
                        date.getMonth() === today.getMonth() &&
                        date.getFullYear() === today.getFullYear();

                    // æ£€æŸ¥æ˜¯å¦è¢«é€‰ä¸­
                    isSelected = this.selectedDate &&
                        date.getDate() === this.selectedDate.getDate() &&
                        date.getMonth() === this.selectedDate.getMonth() &&
                        date.getFullYear() === this.selectedDate.getFullYear();

                    // æ£€æŸ¥æ˜¯å¦ç¦ç”¨
                    isDisabled = this.isDateDisabled(date);

                    let className = 'calendar-day';
                    if (!isCurrentMonth) className += ' other-month';
                    if (isToday) className += ' today';
                    if (isSelected) className += ' selected';
                    if (isDisabled) className += ' disabled';

                    html += `<div class="${className}" data-date="${date.toISOString()}" ${isDisabled ? 'disabled' : ''}>${day}</div>`;
                }

                return html;
            }

            isDateDisabled(date) {
                if (this.options.minDate && date < this.options.minDate) {
                    return true;
                }
                if (this.options.maxDate && date > this.options.maxDate) {
                    return true;
                }
                return false;
            }

            bindCalendarEvents() {
                // æœˆä»½/å¹´ä»½å¯¼èˆª
                this.calendar.querySelectorAll('.calendar-nav').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const change = e.target.dataset.change;
                        const dir = parseInt(e.target.dataset.dir);

                        if (change === 'month') {
                            this.showingDate.setMonth(this.showingDate.getMonth() + dir);
                        } else if (change === 'year') {
                            this.showingDate.setFullYear(this.showingDate.getFullYear() + dir);
                        }

                        this.renderCalendar();
                    });
                });

                // æ—¥æœŸç‚¹å‡»
                this.calendar.querySelectorAll('.calendar-day:not(.disabled)').forEach(day => {
                    day.addEventListener('click', (e) => {
                        const dateStr = e.target.dataset.date;
                        const date = new Date(dateStr);
                        this.selectDate(date);
                        this.closeCalendar();
                    });
                });

                // ä»Šå¤©æŒ‰é’®
                this.calendar.querySelector('.today-btn').addEventListener('click', () => {
                    this.selectDate(new Date());
                    this.closeCalendar();
                });

                // æ¸…ç©ºæŒ‰é’®
                this.calendar.querySelector('.clear-btn').addEventListener('click', () => {
                    this.clearDate();
                    this.closeCalendar();
                });
            }

            selectDate(date) {
                this.selectedDate = date;
                this.showingDate = new Date(date);
                this.updateInput();
                this.renderCalendar();

                // å›è°ƒå‡½æ•°
                if (typeof this.options.onChange === 'function') {
                    this.options.onChange(this.getFormattedDate());
                }
            }

            clearDate() {
                this.selectedDate = null;
                this.input.value = '';
                this.input.placeholder = 'é€‰æ‹©æ—¥æœŸ';

                // å›è°ƒå‡½æ•°
                if (typeof this.options.onChange === 'function') {
                    this.options.onChange(null);
                }
            }

            updateInput() {
                if (this.selectedDate) {
                    this.input.value = this.formatDate(this.selectedDate);
                }
            }

            formatDate(date) {
                const year = date.getFullYear();
                const month = String(date.getMonth() + 1).padStart(2, '0');
                const day = String(date.getDate()).padStart(2, '0');

                return `${year}-${month}-${day}`;
            }

            getFormattedDate() {
                return this.selectedDate ? this.formatDate(this.selectedDate) : null;
            }

            setDate(dateString) {
                const date = new Date(dateString);
                if (!isNaN(date.getTime())) {
                    this.selectDate(date);
                }
            }

            getDate() {
                return this.selectedDate;
            }

            enable() {
                this.input.disabled = false;
                this.input.style.opacity = '1';
            }

            disable() {
                this.input.disabled = true;
                this.input.style.opacity = '0.6';
                this.closeCalendar();
            }
        }

        // åˆå§‹åŒ–æ—¥æœŸé€‰æ‹©å™¨
        let datePickers = {};

        function initDatePickers() {
            // åŸºæœ¬æ—¥æœŸé€‰æ‹©å™¨
            datePickers.basic = new DatePicker('datePicker', {
                onChange: updateResult
            });

            // å¼€å§‹æ—¥æœŸé€‰æ‹©å™¨
            datePickers.start = new DatePicker('startDatePicker', {
                onChange: (date) => {
                    updateResult();
                    // è®¾ç½®ç»“æŸæ—¥æœŸçš„æœ€å°æ—¥æœŸ
                    if (date) {
                        const minDate = new Date(date);
                        datePickers.end.options.minDate = minDate;
                        datePickers.end.renderCalendar();
                    }
                }
            });

            // ç»“æŸæ—¥æœŸé€‰æ‹©å™¨
            datePickers.end = new DatePicker('endDatePicker', {
                onChange: (date) => {
                    updateResult();
                    // è®¾ç½®å¼€å§‹æ—¥æœŸçš„æœ€å¤§æ—¥æœŸ
                    if (date) {
                        const maxDate = new Date(date);
                        datePickers.start.options.maxDate = maxDate;
                        datePickers.start.renderCalendar();
                    }
                }
            });

            // æ—¥æœŸæ—¶é—´é€‰æ‹©å™¨
            datePickers.datetime = new DatePicker('datetimePicker', {
                onChange: updateResult
            });

            // æ—¶é—´é€‰æ‹©å™¨ç»„ä»¶
            setupTimePicker();
        }

        function setupTimePicker() {
            const timeContainer = document.getElementById('timePicker');
            const hourInput = document.getElementById('hourInput');
            const minuteInput = document.getElementById('minuteInput');
            const ampmSelect = document.getElementById('ampmSelect');

            // æ—¶é—´è¾“å…¥éªŒè¯
            hourInput.addEventListener('change', () => {
                let hour = parseInt(hourInput.value) || 0;
                if (hour < 0) hour = 0;
                if (hour > 23) hour = 23;
                hourInput.value = hour.toString().padStart(2, '0');
                updateResult();
            });

            minuteInput.addEventListener('change', () => {
                let minute = parseInt(minuteInput.value) || 0;
                if (minute < 0) minute = 0;
                if (minute > 59) minute = 59;
                minuteInput.value = minute.toString().padStart(2, '0');
                updateResult();
            });

            ampmSelect.addEventListener('change', () => {
                updateResult();
            });

            // å½“æ—¶é€‰æ‹©å™¨æ˜¾ç¤ºæ—¶ï¼Œæ˜¾ç¤ºæ—¶é—´é€‰æ‹©
            datePickers.datetime.container.addEventListener('click', () => {
                setTimeout(() => {
                    timeContainer.style.display = 'flex';
                }, 100);
            });
        }

        function updateResult() {
            const result = {
                basic: datePickers.basic.getFormattedDate(),
                start: datePickers.start.getFormattedDate(),
                end: datePickers.end.getFormattedDate(),
                datetime: datePickers.datetime.getFormattedDate()
            };

            // æ·»åŠ æ—¶é—´ä¿¡æ¯
            const hour = document.getElementById('hourInput').value;
            const minute = document.getElementById('minuteInput').value;
            const ampm = document.getElementById('ampmSelect').value;

            if (hour && minute) {
                result.time = `${hour}:${minute} ${ampm}`;
            }

            document.getElementById('resultContent').textContent = JSON.stringify(result, null, 2);
        }

        function setupControls() {
            // è·å–æ—¥æœŸæŒ‰é’®
            document.getElementById('getDateBtn').addEventListener('click', () => {
                const basicDate = datePickers.basic.getFormattedDate();
                const startDate = datePickers.start.getFormattedDate();
                const endDate = datePickers.end.getFormattedDate();

                alert(`åŸºæœ¬æ—¥æœŸ: ${basicDate || 'æœªé€‰æ‹©'}\nå¼€å§‹æ—¥æœŸ: ${startDate || 'æœªé€‰æ‹©'}\nç»“æŸæ—¥æœŸ: ${endDate || 'æœªé€‰æ‹©'}`);
            });

            // è®¾ç½®ä¸ºä»Šå¤©æŒ‰é’®
            document.getElementById('setDateBtn').addEventListener('click', () => {
                const today = new Date().toISOString().split('T')[0];
                datePickers.basic.setDate(today);
                datePickers.start.setDate(today);
                datePickers.end.setDate(today);
                datePickers.datetime.setDate(today);

                // è®¾ç½®æ—¶é—´ä¸ºå½“å‰æ—¶é—´
                const now = new Date();
                document.getElementById('hourInput').value = now.getHours().toString().padStart(2, '0');
                document.getElementById('minuteInput').value = now.getMinutes().toString().padStart(2, '0');
                document.getElementById('ampmSelect').value = now.getHours() >= 12 ? 'PM' : 'AM';

                updateResult();
            });

            // æ¸…ç©ºæ—¥æœŸæŒ‰é’®
            document.getElementById('clearDateBtn').addEventListener('click', () => {
                datePickers.basic.clearDate();
                datePickers.start.clearDate();
                datePickers.end.clearDate();
                datePickers.datetime.clearDate();

                // æ¸…ç©ºæ—¶é—´
                document.getElementById('hourInput').value = '';
                document.getElementById('minuteInput').value = '';

                updateResult();
            });

            // ç¦ç”¨/å¯ç”¨æŒ‰é’®
            let isDisabled = false;
            document.getElementById('disableBtn').addEventListener('click', () => {
                isDisabled = !isDisabled;

                if (isDisabled) {
                    datePickers.basic.disable();
                    datePickers.start.disable();
                    datePickers.end.disable();
                    datePickers.datetime.disable();
                    document.getElementById('disableBtn').textContent = 'å¯ç”¨æ‰€æœ‰';
                } else {
                    datePickers.basic.enable();
                    datePickers.start.enable();
                    datePickers.end.enable();
                    datePickers.datetime.enable();
                    document.getElementById('disableBtn').textContent = 'ç¦ç”¨æ‰€æœ‰';
                }
            });

            // å¿«é€Ÿé€‰æ‹©æŒ‰é’®
            document.querySelectorAll('.quick-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const range = btn.dataset.range;
                    const today = new Date();

                    let startDate = new Date();
                    let endDate = new Date();

                    switch (range) {
                        case 'today':
                            startDate = new Date(today);
                            endDate = new Date(today);
                            break;
                        case 'yesterday':
                            startDate = new Date(today);
                            startDate.setDate(today.getDate() - 1);
                            endDate = new Date(startDate);
                            break;
                        case 'thisWeek':
                            startDate = new Date(today);
                            startDate.setDate(today.getDate() - today.getDay());
                            endDate = new Date(startDate);
                            endDate.setDate(startDate.getDate() + 6);
                            break;
                        case 'lastWeek':
                            startDate = new Date(today);
                            startDate.setDate(today.getDate() - today.getDay() - 7);
                            endDate = new Date(startDate);
                            endDate.setDate(startDate.getDate() + 6);
                            break;
                        case 'thisMonth':
                            startDate = new Date(today.getFullYear(), today.getMonth(), 1);
                            endDate = new Date(today.getFullYear(), today.getMonth() + 1, 0);
                            break;
                        case 'lastMonth':
                            startDate = new Date(today.getFullYear(), today.getMonth() - 1, 1);
                            endDate = new Date(today.getFullYear(), today.getMonth(), 0);
                            break;
                        case 'thisYear':
                            startDate = new Date(today.getFullYear(), 0, 1);
                            endDate = new Date(today.getFullYear(), 11, 31);
                            break;
                    }

                    datePickers.start.setDate(startDate.toISOString().split('T')[0]);
                    datePickers.end.setDate(endDate.toISOString().split('T')[0]);
                    updateResult();
                });
            });
        }

        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            initDatePickers();
            setupControls();
            updateResult();
        });
    </script>
</body>

</html>